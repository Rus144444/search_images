{"ast":null,"code":"var _jsxFileName = \"/Users/ruslan/Desktop/pro/react-axios/my-app/src/App.js\";\nimport React, { Component } from \"react\";\nimport { Searchbar } from \"./Searchbar/Searchbar\";\nimport { ImageGallery } from \"./ImageGallery/ImageGallery\";\nimport { Modal } from \"./Modal/Modal\";\nimport { Button } from \"./Button/Button\";\nimport { Loader } from \"./Loader/Loader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_KEY = \"your_key\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      images: [],\n      query: \"\",\n      page: 1,\n      loading: false,\n      largeImage: null,\n      error: null\n    };\n    this.fetchImages = async () => {\n      const {\n        query,\n        page\n      } = this.state;\n      if (!query) return;\n      this.setState({\n        loading: true\n      });\n      try {\n        const response = await fetch(`${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`);\n\n        // Логируем URL и ответ от API\n        console.log(\"API URL:\", `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`);\n        if (!response.ok) {\n          throw new Error(\"Ошибка запроса\");\n        }\n        const data = await response.json();\n\n        // Логируем данные, которые пришли от API\n        console.log(\"API Data:\", data);\n        if (data.hits) {\n          this.setState(prevState => ({\n            images: page === 1 ? data.hits : [...prevState.images, ...data.hits]\n          }));\n        } else {\n          this.setState({\n            error: \"Изображения не найдены\"\n          });\n        }\n      } catch (error) {\n        // Логируем ошибку\n        console.error(\"Error fetching data:\", error);\n        this.setState({\n          error: \"Что-то пошло не так. Попробуйте снова позже.\"\n        });\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n    this.handleSearch = newQuery => {\n      this.setState({\n        query: newQuery,\n        page: 1,\n        images: [],\n        error: null\n      });\n    };\n    this.handleImageClick = imageUrl => {\n      this.setState({\n        largeImage: imageUrl\n      });\n    };\n    this.handleLoadMore = () => {\n      this.setState(prevState => ({\n        page: prevState.page + 1\n      }));\n    };\n    this.handleCloseModal = () => {\n      this.setState({\n        largeImage: null\n      });\n    };\n  }\n  // Компонент вызывается после обновления состояния\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      query,\n      page\n    } = this.state;\n    if (prevState.query !== query || prevState.page !== page) {\n      this.fetchImages(); // Теперь this будет работать корректно\n    }\n  }\n  render() {\n    const {\n      images,\n      loading,\n      error,\n      largeImage\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n        onSubmit: this.handleSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(ImageGallery, {\n        images: images,\n        onImageClick: this.handleImageClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this), images.length > 0 && !loading && /*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.handleLoadMore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), largeImage && /*#__PURE__*/_jsxDEV(Modal, {\n        largeImage: largeImage,\n        onClose: this.handleCloseModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","Searchbar","ImageGallery","Modal","Button","Loader","jsxDEV","_jsxDEV","API_KEY","BASE_URL","App","constructor","args","state","images","query","page","loading","largeImage","error","fetchImages","setState","response","fetch","console","log","ok","Error","data","json","hits","prevState","handleSearch","newQuery","handleImageClick","imageUrl","handleLoadMore","handleCloseModal","componentDidUpdate","prevProps","render","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","onImageClick","length","onClick","onClose"],"sources":["/Users/ruslan/Desktop/pro/react-axios/my-app/src/App.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { Searchbar } from \"./Searchbar/Searchbar\";\nimport { ImageGallery } from \"./ImageGallery/ImageGallery\";\nimport { Modal } from \"./Modal/Modal\";\nimport { Button } from \"./Button/Button\";\nimport { Loader } from \"./Loader/Loader\";\nconst API_KEY = \"your_key\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nclass App extends Component {\n  state = {\n    images: [],\n    query: \"\",\n    page: 1,\n    loading: false,\n    largeImage: null,\n    error: null,\n  };\n\n  fetchImages = async () => {\n    const { query, page } = this.state;\n    if (!query) return;\n\n    this.setState({ loading: true });\n\n    try {\n      const response = await fetch(\n        `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\n      );\n\n      // Логируем URL и ответ от API\n      console.log(\n        \"API URL:\",\n        `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Ошибка запроса\");\n      }\n\n      const data = await response.json();\n\n      // Логируем данные, которые пришли от API\n      console.log(\"API Data:\", data);\n\n      if (data.hits) {\n        this.setState((prevState) => ({\n          images: page === 1 ? data.hits : [...prevState.images, ...data.hits],\n        }));\n      } else {\n        this.setState({ error: \"Изображения не найдены\" });\n      }\n    } catch (error) {\n      // Логируем ошибку\n      console.error(\"Error fetching data:\", error);\n      this.setState({ error: \"Что-то пошло не так. Попробуйте снова позже.\" });\n    } finally {\n      this.setState({ loading: false });\n    }\n  };\n\n  // Компонент вызывается после обновления состояния\n  componentDidUpdate(prevProps, prevState) {\n    const { query, page } = this.state;\n    if (prevState.query !== query || prevState.page !== page) {\n      this.fetchImages(); // Теперь this будет работать корректно\n    }\n  }\n\n  handleSearch = (newQuery) => {\n    this.setState({\n      query: newQuery,\n      page: 1,\n      images: [],\n      error: null,\n    });\n  };\n\n  handleImageClick = (imageUrl) => {\n    this.setState({ largeImage: imageUrl });\n  };\n\n  handleLoadMore = () => {\n    this.setState((prevState) => ({ page: prevState.page + 1 }));\n  };\n\n  handleCloseModal = () => {\n    this.setState({ largeImage: null });\n  };\n\n  render() {\n    const { images, loading, error, largeImage } = this.state;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleSearch} />\n        {error && <p className=\"error\">{error}</p>}\n        <ImageGallery images={images} onImageClick={this.handleImageClick} />\n        {loading && <Loader />}\n        {images.length > 0 && !loading && (\n          <Button onClick={this.handleLoadMore} />\n        )}\n        {largeImage && (\n          <Modal largeImage={largeImage} onClose={this.handleCloseModal} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}